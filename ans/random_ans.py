from transformers import AutoModelForCausalLM, AutoTokenizer, pipeline

# –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª—ë–≥–∫—É—é –≤–µ—Ä—Å–∏—é LLaMA 2
model_name = "NousResearch/Llama-2-7b-chat-hf"

# –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä –∏ –º–æ–¥–µ–ª—å
tokenizer = AutoTokenizer.from_pretrained(model_name)
model = AutoModelForCausalLM.from_pretrained(model_name, device_map="auto")

# –°–æ–∑–¥–∞—ë–º –ø–∞–π–ø–ª–∞–π–Ω –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞
pipe = pipeline("text-generation", model=model, tokenizer=tokenizer, max_length=100)

# –í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
questions = [
    {"question": "–ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –±—Ä–æ—Å–∏—Ç—å –∫–∞–º–µ–Ω—å –≤ –≤–æ–¥—É?", "answer": "–û–Ω —É—Ç–æ–Ω–µ—Ç"},
    {"question": "–ß—Ç–æ —Ç—è–∂–µ–ª–µ–µ: –∫–∏–ª–æ–≥—Ä–∞–º–º –ø—É—Ö–∞ –∏–ª–∏ –∫–∏–ª–æ–≥—Ä–∞–º–º –∂–µ–ª–µ–∑–∞?", "answer": "–û–Ω–∏ –≤–µ—Å—è—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ"},
    {"question": "–ï—Å–ª–∏ –º–∞–º–∞ —Å—Ç–∞—Ä—à–µ –¥–æ—á–µ—Ä–∏ –Ω–∞ 25 –ª–µ—Ç, —Ç–æ –Ω–∞ —Å–∫–æ–ª—å–∫–æ –ª–µ—Ç –¥–æ—á—å –±—É–¥–µ—Ç –º–ª–∞–¥—à–µ –º–∞–º—ã —á–µ—Ä–µ–∑ 5 –ª–µ—Ç?", "answer": "–ù–∞ 25 –ª–µ—Ç"}
]

score = 0

for q in questions:
    user_answer = input(q["question"] + "\n–í–∞—à –æ—Ç–≤–µ—Ç: ").strip()

    # –§–æ—Ä–º–∏—Ä—É–µ–º –ø—Ä–æ–º–ø—Ç –¥–ª—è –º–æ–¥–µ–ª–∏
    prompt = (f"–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: '{q['answer']}'.\n"
              f"–û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: '{user_answer}'.\n"
              "–û—Ü–µ–Ω–∏, –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç –ø–æ—Ö–æ–∂ –ø–æ —Å–º—ã—Å–ª—É (1 - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, 0 - —Å–æ–≤—Å–µ–º –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π), –∏ –æ–±—ä—è—Å–Ω–∏ —Ä–∞–∑–ª–∏—á–∏—è.")

    # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–ª–∏
    response = pipe(prompt)[0]["generated_text"]

    # –û—Ü–µ–Ω–∏–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    if "1" in response:
        print("‚úÖ –û—Ç–ª–∏—á–Ω–æ! –í–∞—à –æ—Ç–≤–µ—Ç –ø–æ —Å–º—ã—Å–ª—É –æ—á–µ–Ω—å –±–ª–∏–∑–æ–∫.")
        score += 1
    elif "0.5" in response:
        print(f"üü° –ü–æ—á—Ç–∏ –≤–µ—Ä–Ω–æ! –í–∞—à –æ—Ç–≤–µ—Ç –ø–æ—Ö–æ–∂, –Ω–æ –Ω–µ–º–Ω–æ–≥–æ –Ω–µ —Ç–æ—á–µ–Ω.\n–û—Ç–≤–µ—Ç –º–æ–¥–µ–ª–∏: {response}")
    else:
        print(f"‚ùå –ù–µ–≤–µ—Ä–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: {q['answer']}\n–û—Ç–≤–µ—Ç –º–æ–¥–µ–ª–∏: {response}")

print(f"\nüéØ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω! –í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {score}/{len(questions)}")
